import requests
from selenium import webdriver
from bs4 import BeautifulSoup
import csv
import re
import pandas as pd



URL = "https://www.amazon.in/s?k=mobiles&crid=1KQOU9AK308PZ&sprefix=mobile%2Caps%2C976&ref=nb_sb_noss_1"
page = requests.get(URL)
soup = BeautifulSoup(page.content, 'lxml')
lists = soup.findAll('div',attrs={'class' :'a-section'})

          
prod = []
pree = []
mrr = []
for list in lists:
    product = list.find('span',attrs={'class':"a-size-medium a-color-base a-text-normal"})
    # prod.append(product)
    # print(product.text.split('-')[0].strip())
    # prod.append(product)
    if product is not None:
        ementa = product.text
    else:
        ementa = None
    prod.append(ementa)
    # # print(product)
    sprice = list.find('span', attrs={'class':'a-price-whole'})
    if sprice is not None:
        sprr = sprice.text
    else:
        sprr = None
    pree.append(sprr)
    # pree.append(sprice)
    # print(price)
    mrp = list.find('span', attrs={'class':'a-offscreen'})
    if mrp is not None:
        mpp = mrp.text
    else:
        mpp = None
    mrr.append(mpp)
    # mrr.append(mrp)

df = pd.DataFrame({'Product Name':prod,'Selling Price':pree, 'MRP':mrr}) 

df.to_csv('AZphon.csv', index=False, encoding='utf-8',skiprows = 1) 
df.head()
